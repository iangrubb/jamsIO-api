# Migration `20201007130903-updates-playlist-to-many-one`

This migration has been generated by IanGrubb at 10/7/2020, 9:09:03 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."PlaylistTrack" DROP CONSTRAINT "PlaylistTrack_playlistId_fkey"

ALTER TABLE "public"."PlaylistTrack" DROP CONSTRAINT "PlaylistTrack_trackId_fkey"

ALTER TABLE "public"."Playlist" ADD COLUMN "spotify_id" text   NOT NULL ,
ADD COLUMN "createdAt" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP

DROP TABLE "public"."PlaylistTrack"
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201007125332-adds-playlists-and-playlist-tracks..20201007130903-updates-playlist-to-many-one
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model User {
   id              Int              @id @default(autoincrement())
@@ -14,8 +14,9 @@
   createdAt       DateTime         @default(now())
   followsReceived Follow[]         @relation("ReceivedBy")
   followsMade     Follow[]         @relation("MadeBy")
   playRecords     PlayRecord[]
+  Playlist        Playlist[]
   playlistUpdates PlaylistUpdate[]
 }
 model Follow {
@@ -69,18 +70,12 @@
   track            Track          @relation(fields: [trackId], references: [id])
 }
 model Playlist {
-  id Int   @id @default(autoincrement())
-  name String
-  userId Int
-  user User @relation(fields: [userId], references: [id])
+  id            Int             @id @default(autoincrement())
+  spotify_id    String
+  name          String
+  userId        Int
+  user          User            @relation(fields: [userId], references: [id])
+  createdAt      DateTime        @default(now())
 }
-model PlaylistTrack {
-  id Int   @id @default(autoincrement())
-  playlistId Int
-  playlist Playlist @relation(fields: [playlistId], references: [id])
-  trackId Int
-  track Track @relation(fields: [trackId], references: [id])
-
-}
```


