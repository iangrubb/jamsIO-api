# Migration `20201020215846-removes-several-tables`

This migration has been generated by IanGrubb at 10/20/2020, 5:58:46 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."PlayRecord" DROP CONSTRAINT "PlayRecord_trackId_fkey"

ALTER TABLE "public"."PlayRecord" DROP CONSTRAINT "PlayRecord_userId_fkey"

ALTER TABLE "public"."Playlist" DROP CONSTRAINT "Playlist_userId_fkey"

ALTER TABLE "public"."TrackAddition" DROP CONSTRAINT "TrackAddition_trackId_fkey"

ALTER TABLE "public"."TrackRemoval" DROP CONSTRAINT "TrackRemoval_trackId_fkey"

ALTER TABLE "public"."TrackAddition" ALTER COLUMN "trackId" SET DATA TYPE text 

ALTER TABLE "public"."TrackRemoval" ALTER COLUMN "trackId" SET DATA TYPE text 

DROP TABLE "public"."PlayRecord"

DROP TABLE "public"."Playlist"

DROP TABLE "public"."Track"
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201007131303-rename-playlist-update-table..20201020215846-removes-several-tables
--- datamodel.dml
+++ datamodel.dml
@@ -3,21 +3,19 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 model User {
-  id              Int              @id @default(autoincrement())
-  username        String           @unique
+  id              Int          @id @default(autoincrement())
+  username        String       @unique
   password        String
-  createdAt       DateTime         @default(now())
-  followsReceived Follow[]         @relation("ReceivedBy")
-  followsMade     Follow[]         @relation("MadeBy")
-  playRecords     PlayRecord[]
-  playlist        Playlist[]
-  jamsUpdates JamsUpdate[]
+  createdAt       DateTime     @default(now())
+  followsReceived Follow[]     @relation("ReceivedBy")
+  followsMade     Follow[]     @relation("MadeBy")
+  jamsUpdates     JamsUpdate[]
 }
 model Follow {
   id         Int      @id @default(autoincrement())
@@ -27,25 +25,8 @@
   followee   User     @relation("ReceivedBy", fields: [followeeId], references: [id])
   follower   User     @relation("MadeBy", fields: [followerId], references: [id])
 }
-model PlayRecord {
-  id        Int      @id @default(autoincrement())
-  userId    Int
-  trackId   Int
-  createdAt DateTime @default(now())
-  track     Track    @relation(fields: [trackId], references: [id])
-  user      User     @relation(fields: [userId], references: [id])
-}
-
-model Track {
-  id             Int             @id @default(autoincrement())
-  spotifyId      String
-  playRecords    PlayRecord[]
-  trackAdditions TrackAddition[]
-  trackRemovals  TrackRemoval[]
-}
-
 model JamsUpdate {
   id             Int             @id @default(autoincrement())
   userId         Int
   createdAt      DateTime        @default(now())
@@ -54,27 +35,16 @@
   trackRemovals  TrackRemoval[]
 }
 model TrackAddition {
-  id               Int            @id @default(autoincrement())
-  trackId          Int
+  id           Int        @id @default(autoincrement())
+  trackId      String
   jamsUpdateId Int
   jamsUpdate   JamsUpdate @relation(fields: [jamsUpdateId], references: [id])
-  track            Track          @relation(fields: [trackId], references: [id])
 }
 model TrackRemoval {
-  id               Int            @id @default(autoincrement())
-  trackId          Int
+  id           Int        @id @default(autoincrement())
+  trackId      String
   jamsUpdateId Int
   jamsUpdate   JamsUpdate @relation(fields: [jamsUpdateId], references: [id])
-  track            Track          @relation(fields: [trackId], references: [id])
 }
-
-model Playlist {
-  id         Int      @id @default(autoincrement())
-  name       String
-  userId     Int
-  spotify_id String
-  createdAt  DateTime @default(now())
-  user       User     @relation(fields: [userId], references: [id])
-}
```


