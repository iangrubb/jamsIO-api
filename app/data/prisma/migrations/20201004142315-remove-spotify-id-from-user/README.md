# Migration `20201004142315-remove-spotify-id-from-user`

This migration has been generated by IanGrubb at 10/4/2020, 10:23:15 AM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."User" DROP COLUMN "spotifyId"
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20201003184228-adds-created-at..20201004142315-remove-spotify-id-from-user
--- datamodel.dml
+++ datamodel.dml
@@ -1,78 +1,71 @@
-// This is your Prisma schema file,
-// learn more about it in the docs: https://pris.ly/d/prisma-schema
+generator client {
+  provider = "prisma-client-js"
+}
-
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
-generator client {
-  provider = "prisma-client-js"
-}
-
-
-
 model User {
-  id  Int   @id @default(autoincrement())
-  spotifyId String
-  username String
-  email String
-  password String
-  playRecords PlayRecord[]
+  id              Int              @id @default(autoincrement())
+  username        String
+  email           String
+  password        String
+  createdAt       DateTime         @default(now())
+  followsReceived Follow[]         @relation("ReceivedBy")
+  followsMade     Follow[]         @relation("MadeBy")
+  playRecords     PlayRecord[]
   playlistUpdates PlaylistUpdate[]
-  followsMade Follow[] @relation("MadeBy")
-  followsReceived Follow[] @relation("ReceivedBy")
-  createdAt DateTime @default(now())
 }
 model Follow {
-  id  Int   @id @default(autoincrement())
-  follower User @relation(name: "MadeBy", fields: [followerId], references: [id])
+  id         Int      @id @default(autoincrement())
   followerId Int
-  followee User @relation(name: "ReceivedBy",fields: [followeeId], references: [id])
   followeeId Int
-  createdAt DateTime @default(now())
+  createdAt  DateTime @default(now())
+  followee   User     @relation("ReceivedBy", fields: [followeeId], references: [id])
+  follower   User     @relation("MadeBy", fields: [followerId], references: [id])
 }
 model PlayRecord {
-  id  Int   @id @default(autoincrement())
-  user User @relation(fields: [userId], references: [id])
-  userId Int
-  track Track @relation(fields: [trackId], references: [id])
-  trackId Int
+  id        Int      @id @default(autoincrement())
+  userId    Int
+  trackId   Int
   createdAt DateTime @default(now())
+  track     Track    @relation(fields: [trackId], references: [id])
+  user      User     @relation(fields: [userId], references: [id])
 }
 model Track {
-  id Int @id @default(autoincrement())
-  spotifyId String
-  playRecords PlayRecord[]
+  id             Int             @id @default(autoincrement())
+  spotifyId      String
+  playRecords    PlayRecord[]
   trackAdditions TrackAddition[]
-  trackRemovals TrackRemoval[]
+  trackRemovals  TrackRemoval[]
 }
 model PlaylistUpdate {
-  id  Int   @id @default(autoincrement())
-  user User @relation(fields: [userId], references: [id])
-  userId Int
+  id             Int             @id @default(autoincrement())
+  userId         Int
+  createdAt      DateTime        @default(now())
+  user           User            @relation(fields: [userId], references: [id])
   trackAdditions TrackAddition[]
-  trackRemovals TrackRemoval[]
-  createdAt DateTime @default(now())
+  trackRemovals  TrackRemoval[]
 }
 model TrackAddition {
-  id  Int   @id @default(autoincrement())
-  track Track @relation(fields: [trackId], references: [id])
-  trackId Int
-  playlistUpdate PlaylistUpdate @relation(fields: [playlistUpdateId], references: [id])
+  id               Int            @id @default(autoincrement())
+  trackId          Int
   playlistUpdateId Int
+  playlistUpdate   PlaylistUpdate @relation(fields: [playlistUpdateId], references: [id])
+  track            Track          @relation(fields: [trackId], references: [id])
 }
 model TrackRemoval {
-  id  Int   @id @default(autoincrement())
-  track Track @relation(fields: [trackId], references: [id])
-  trackId Int
-  playlistUpdate PlaylistUpdate @relation(fields: [playlistUpdateId], references: [id])
+  id               Int            @id @default(autoincrement())
+  trackId          Int
   playlistUpdateId Int
+  playlistUpdate   PlaylistUpdate @relation(fields: [playlistUpdateId], references: [id])
+  track            Track          @relation(fields: [trackId], references: [id])
 }
```


